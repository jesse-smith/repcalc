[
  {
    "objectID": "rep_calc.html",
    "href": "rep_calc.html",
    "title": "Rep Calculator",
    "section": "",
    "text": "// Create a dataframe with load and reps columns\ndata = [\n  {load: 100, reps: 1},\n  {load: 95, reps: 3.28},\n  {load: 90, reps: 4.94},\n  {load: 85, reps: 7.15},\n  {load: 80, reps: 9.75},\n  {load: 75, reps: 12.37},\n  {load: 70, reps: 14.80},\n  {load: 65, reps: 17.11},\n  {load: 60, reps: 19.53},\n  {load: 55, reps: 22.43},\n  {load: 50, reps: 25.99},\n  {load: 45, reps: 30.37},\n  {load: 40, reps: 35.75},\n  {load: 35, reps: 42.37},\n  {load: 30, reps: 50.50}\n]\n\n\n\n\n\n\n\nviewof currentReps = Inputs.number([1, 50], {step: 1, value: 12})\nviewof currentWeight = Inputs.number({step: 0.5, value: 20})\nviewof currentRpe = Inputs.number([0.5,10], {step: 0.5, value: 9})\n\nmutable storedDesiredReps = 15\nmutable storedDesiredWeight = 15\n\nviewof inputSelect = Inputs.select(['reps', 'weight'], {value: 'Reps'})\n\nviewof desiredValue = inputSelect == 'reps' \n  ? Inputs.number([1, 50], {step: 1, value: mutable storedDesiredReps})\n  : Inputs.number({step: 0.5, value: mutable storedDesiredWeight})\n\nviewof desiredRpe = Inputs.number([0.5, 10], {step: 0.5, value: 9})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhtml`&lt;div style=\"display: grid; grid-template-columns: 4rem 6rem 6rem 5rem; gap: 0.75rem 1rem; align-items: end; margin-bottom: 1rem;\"&gt;\n  &lt;span style=\"font-weight: bold;\"&gt;Current&lt;/span&gt;\n  &lt;div style=\"display: flex; align-items: end; gap: 0.25rem;\"&gt;\n    ${viewof currentReps}\n    &lt;span&gt;reps&lt;/span&gt;\n  &lt;/div&gt;\n  &lt;div style=\"display: flex; align-items: end; gap: 0.25rem;\"&gt;\n    ${viewof currentWeight}\n    &lt;span&gt;lbs&lt;/span&gt;\n  &lt;/div&gt;\n  &lt;div style=\"display: flex; align-items: end; gap: 0.25rem;\"&gt;\n    ${viewof currentRpe}\n    &lt;span&gt;RPE&lt;/span&gt;\n  &lt;/div&gt;\n  \n  &lt;span style=\"font-weight: bold;\"&gt;Desired&lt;/span&gt;\n  &lt;div&gt;${viewof inputSelect}&lt;/div&gt;\n  &lt;div style=\"display: flex; align-items: end; gap: 0.25rem;\"&gt;\n    ${viewof desiredValue}\n    &lt;span&gt;${inputSelect == 'reps' ? 'reps' : 'lbs'}&lt;/span&gt;\n  &lt;/div&gt;\n  &lt;div style=\"display: flex; align-items: end; gap: 0.25rem;\"&gt;\n    ${viewof desiredRpe}\n    &lt;span&gt;RPE&lt;/span&gt;\n  &lt;/div&gt;\n&lt;/div&gt;`\n\n\n\n\n\n\n\n{\n  if (inputSelect == 'reps') {\n    mutable storedDesiredReps = desiredValue;\n  } else {\n    mutable storedDesiredWeight = desiredValue;\n  }\n}\n\n\n\n\n\n\n\nmutable storedCustomWeight = 0\n\nmutable baseWeightList = [\n  {name: 'None', value: 0},\n  {name: 'Smith Machine', value: 25},\n  {name: '45Â° Leg Press', value: 167},\n  {name: 'Custom', value: 0}\n]\n\nviewof baseWeightSelect = Inputs.select(baseWeightList, {\n    format: (b) =&gt; b.name,\n    value: baseWeightList.find((b) =&gt; b.name === 'None')\n  }\n)\n\nviewof baseWeight = Inputs.number([0, 999.9], {\n  value: baseWeightSelect.value,\n  disabled: !(baseWeightSelect.name === 'Custom')\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhtml`&lt;div style=\"display: grid; grid-template-columns: 4rem 13rem 5rem; gap: 0.75rem 1rem; align-items: end; margin-bottom: 1rem;\"&gt;\n  &lt;span style=\"font-weight: bold;\"&gt;Base Wt&lt;/span&gt;\n  &lt;div style=\"display: flex; align-items: end; gap: 0.25rem;\"&gt;\n    ${viewof baseWeightSelect}\n  &lt;/div&gt;\n  &lt;div style=\"display: flex; align-items: end; gap: 0.25rem;\"&gt;\n    ${viewof baseWeight}\n    &lt;span&gt;lbs&lt;/span&gt;\n  &lt;/div&gt;\n&lt;/div&gt;`\n\n\n\n\n\n\n\n{\n  if (baseWeightSelect.name == 'Custom') {\n    const customIndex = mutable baseWeightList.findIndex(b =&gt; b.name === 'Custom');\n    if (customIndex !== -1) {\n      mutable baseWeightList[customIndex].value = baseWeight;\n    }\n  }\n}\n\n\n\n\n\n\n\nmutable weightLists = [\n  {name: 'Plates', value: [5, 10, 20, 50, 90]},\n  {name: 'Dumbbells (x1)', value: [3, 5, 8, 10, 12, 15, 17.5, 20, 22.5, 25, 27.5, 30, 32.5, 35, 37.5, 40, 45, 50, 55, 60, 65, 70]},\n  {name: 'Dumbbells (x2)', value: [6, 10, 16, 20, 24, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 90, 100, 110, 120, 130, 140]},\n  {name: 'Cable (Purple Machine)', value: [5, 7.5, 10, 12.5, 15, 17.5, 20, 22.5, 25, 27.5, 30, 32.5, 35, 37.5, 40, 42.5, 45, 47.5, 50, 52.5, 55, 57.5, 60]}\n]\n\n\n\n\n\n\n\n// Monotone cubic spline interpolation (Fritsch-Carlson method)\nfunction createMonotoneSpline(x, y) {\n  const n = x.length;\n  \n  // Calculate slopes\n  const dys = [];\n  const dxs = [];\n  const ms = [];\n  \n  for (let i = 0; i &lt; n - 1; i++) {\n    const dx = x[i + 1] - x[i];\n    const dy = y[i + 1] - y[i];\n    dxs.push(dx);\n    dys.push(dy);\n    ms.push(dy / dx);\n  }\n  \n  // Get tangents (derivatives at each point)\n  const c = [ms[0]];\n  for (let i = 1; i &lt; n - 1; i++) {\n    const m0 = ms[i - 1];\n    const m1 = ms[i];\n    if (m0 * m1 &lt;= 0) {\n      c.push(0);\n    } else {\n      const dx0 = dxs[i - 1];\n      const dx1 = dxs[i];\n      const common = dx0 + dx1;\n      c.push(3 * common / ((common + dx1) / m0 + (common + dx0) / m1));\n    }\n  }\n  c.push(ms[n - 2]);\n  \n  // Return interpolation function\n  return function(input) {\n    // Handle out of bounds\n    if (input &lt;= x[0]) return y[0];\n    if (input &gt;= x[n - 1]) return y[n - 1];\n    \n    // Find the right interval\n    let i = 0;\n    while (input &gt; x[i + 1]) i++;\n    \n    const t = (input - x[i]) / dxs[i];\n    const t2 = t * t;\n    const t3 = t2 * t;\n    \n    const h00 = 2 * t3 - 3 * t2 + 1;\n    const h10 = t3 - 2 * t2 + t;\n    const h01 = -2 * t3 + 3 * t2;\n    const h11 = t3 - t2;\n    \n    return h00 * y[i] + h10 * dxs[i] * c[i] + h01 * y[i + 1] + h11 * dxs[i] * c[i + 1];\n  };\n}\n\n\n\n\n\n\n\nloadToReps = createMonotoneSpline(\n  data.map(d =&gt; d.load).reverse(),  // Reverse because load decreases as reps increase\n  data.map(d =&gt; d.reps).reverse()\n)\n\nrepsToLoad = createMonotoneSpline(\n  data.map(d =&gt; d.reps),\n  data.map(d =&gt; d.load)\n)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncurrentWeightTotal = currentWeight + baseWeight\ncurrentLoad = repsToLoad(currentReps)\noneRmTotal = currentWeightTotal / (currentLoad / 100.0)\noneRM = oneRmTotal - baseWeight\n\ndesiredWeight = inputSelect == 'reps' \n  ? oneRmTotal * repsToLoad(desiredValue) / 100.0 - baseWeight\n  : desiredValue\n\ndesiredReps = inputSelect == 'reps'\n  ? desiredValue\n  : loadToReps(100.0 * (desiredValue + baseWeight) / oneRmTotal)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhtml`&lt;div style=\"display: grid; grid-template-columns: 4rem 6rem 6rem 5rem; gap: 0.75rem 1rem; align-items: end; margin-bottom: 1rem;\"&gt;\n  &lt;span style=\"font-weight: bold;\"&gt;Predicted&lt;/span&gt;\n  &lt;div style=\"display: flex; align-items: end; gap: 0.25rem;\"&gt;\n    &lt;span style=\"padding-left: 3.6px; ${inputSelect == 'weight' ? 'font-weight: bold' : ''}\"&gt;${desiredReps.toFixed(1)}&lt;/span&gt;\n    &lt;span style=\"text-align: left; flex: 1; ${inputSelect == 'weight' ? 'font-weight: bold' : ''}\"&gt;reps&lt;/span&gt;\n  &lt;/div&gt;\n  &lt;div style=\"display: flex; align-items: end; gap: 0.25rem;\"&gt;\n    &lt;span style=\"padding-left: 3.6px; ${inputSelect == 'reps' ? 'font-weight: bold' : ''}\"&gt;${desiredWeight.toFixed(1)}&lt;/span&gt;\n    &lt;span style=\"text-align: left; flex: 1; ${inputSelect == 'reps' ? 'font-weight: bold' : ''}\"&gt;lbs&lt;/span&gt;\n  &lt;/div&gt;\n  &lt;div style=\"display: flex; align-items: end; gap: 0.25rem;\"&gt;\n    &lt;span style=\"padding-left: 3.6px\"&gt;${desiredRpe}&lt;/span&gt;\n    &lt;span style=\"text-align: left; flex: 1\"&gt;RPE&lt;/span&gt;\n  &lt;/div&gt;\n&lt;/div&gt;`"
  }
]